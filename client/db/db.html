<template name="db">
    {{#if Template.subscriptionsReady}}
    <h3>Database</h3>
    <div class="db-actions">
        <div class="ui-button js-clear">Clear data</div>
        <div class="ui-button js-syncnow">Sync now</div>
    </div>
    <div class="db-info">
        {{#if errorMessage}}
        {{#Animate}}
        <div class="db-info-message animate">{{errorMessage}}</div>
        {{/Animate}}
        {{/if}}
        <div class="db-info-sheetrows">Sheetdata: {{numSheetRows}} rows</div>
        <div class="db-info-eventrows">Eventlog: {{numEventRows}} rows ({{numEventRowsShown}} shown)</div>
    </div>
    {{> dbLog}}
    {{else}}
    <h3>Waiting for data...</h3>
    {{/if}}
</template>

<template name="dbLog">
    <div class="db-log">
        {{#each dbLogEntries}} {{> dbLogEntry}} {{/each}}
    </div>
</template>

<template name="dbLogEntry">
    <div class="db-log-row">
        <div class="db-log-row-cell">date: {{date}}</div>
        <div class="db-log-row-cell">a: {{activity}}</div>
        <div class="db-log-row-cell">l: {{label}}</div>
        <div class="db-log-row-cell">t: {{time}}</div>
        <div class="db-log-row-cell">e: {{end}}</div>
        <div class="db-log-row-cell">dur: {{duration}}</div>
        <div class="db-log-row-cell">ts: {{prettyDate timestamp}}</div>
        <div class="db-log-row-cell">ets: {{prettyDate endtimestamp}}</div>
        <div class="db-log-row-cell">tsf: {{timestampformatted}}</div>
        <div class="db-log-row-cell">id: {{id}}</div>
    </div>
</template>
